<ui:composition template="/Templates/AdminTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="content">
        <h:form id="formAcesso">
            <!--<div id="divCentral">-->
            <p:growl id="growl" autoUpdate="true" showDetail="true" />
            <p:commandButton class="btnIniciarSessao"  
                             value="Iniciar" 
                             rendered="true" style="font-size: 13px;left: 10%;top:-5%" 
                             oncomplete="PF('pontoDialog').show()"
                             disabled="#{beanPonto.disableIniciar()}" />
            <p:commandButton class="btnEncerrar"  
                             value="Encerrar" rendererType="true"
                             rendered="true" style="font-size: 13px;left: 60%;top:-5% "
                             action="#{beanPonto.encerrarPonto()}"
                             disabled="#{beanPonto.disableEncerrar()}"
                             update="formAcesso"
                             />

            <p:dataTable style="font-size: 15px"
                         value="#{beanPonto.lista}"
                         var="ps"
                         rendered="true"
                         >

                <f:facet name="header" rendered="true">Acesso Diário de Frequência </f:facet>

                <p:column headerText="Data" filterBy="#{ps.data}">
                    <center>
                        <h:outputText value="#{ps.data}">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </center>
                </p:column>

                <p:column headerText="Horário Entrada" filterBy="#{ps.horaEntrada}">
                    <center>
                        <h:outputText value="#{ps.horaEntrada}" >
                            <f:convertDateTime pattern="HH:mm:ss" timeZone="America/Montevideo" />
                        </h:outputText>
                    </center>
                </p:column>

                <p:column headerText="Horário Saída" filterBy="#{ps.horaSaida}">
                    <center>
                        <h:outputText value="#{ps.horaSaida}" >
                            <f:convertDateTime pattern="HH:mm:ss" />
                        </h:outputText>
                    </center>
                </p:column>

                <p:column headerText="Descrição" filterBy="#{ps.descricaoAtividade}">
                    <center>
                        <h:outputText value="#{ps.descricaoAtividade}"/>
                    </center>
                </p:column>

            </p:dataTable>
            <!--</div>-->

            <!--Dialog para alteração-->
            <p:dialog id="dialog" header="Descreva a atividade a ser realizada" widgetVar="pontoDialog"   > 
                <p:outputPanel  id="panelDialog" style="text-align:center;" rendered="true">
                    <p:panelGrid  id="gridId" columns="4"  >
                        <p:inputTextarea value="#{beanPonto.txtDescricao}" rows="10" cols="50" autoResize="false"/>
                    </p:panelGrid>

                    <!--Botões para salvar alterações-->
                    <!--oncomplete="PF('pontoDialog').hide()"-->
                    <p:commandButton value="Continuar" 
                                     update="formAcesso"
                                     action="#{beanPonto.iniciarPonto()}"
                                     icon="ui-icon-circle-check"
                                     />
                </p:outputPanel>
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>
